<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>重置数据卡片</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
        }
        .container {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 8px;
        }
        .btn {
            padding: 10px 20px;
            margin: 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .btn-primary {
            background: #1890ff;
            color: white;
        }
        .btn-danger {
            background: #f5222d;
            color: white;
        }
        .info {
            background: #e6f7ff;
            padding: 15px;
            border-radius: 4px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>数据卡片重置工具</h1>
        
        <div class="info">
            <h3>问题说明</h3>
            <p>当前数据卡片列表可能因为以下原因没有显示ID为3和4的示例卡片：</p>
            <ul>
                <li>示例卡片只在首次使用时创建</li>
                <li>表格类型卡片的显示逻辑存在问题（已修复）</li>

            </ul>
        </div>

        <div>
            <h3>当前数据卡片状态</h3>
            <div id="currentStatus">正在检查...</div>
        </div>

        <div style="margin-top: 30px;">
            <button class="btn btn-primary" onclick="resetDataCards()">重置为示例数据卡片</button>
            <button class="btn btn-danger" onclick="clearAllDataCards()">清空所有数据卡片</button>
            <button class="btn" onclick="window.location.href='datacards.html'">返回数据卡片页面</button>
        </div>

        <div id="result" style="margin-top: 20px;"></div>
    </div>

    <script src="js/dataConfig.js"></script>
    <script>
        // 检查当前状态
        function checkCurrentStatus() {
            // 使用dataConfig.js统一管理数据
            const dataCards = window.DataConfig?.dataCards || [];
            const metrics = window.DataConfig?.metrics || [];
            const dimensions = window.DataConfig?.dimensions || [];
            
            document.getElementById('currentStatus').innerHTML = `
                <p><strong>数据卡片数量：</strong>${dataCards.length} 个</p>
                <p><strong>指标数量：</strong>${metrics.length} 个</p>
                <p><strong>维度数量：</strong>${dimensions.length} 个</p>
                <p><strong>存在的卡片ID：</strong>${dataCards.map(card => card.id).join(', ') || '无'}</p>
                <p><strong>数据来源：</strong>dataConfig.js统一管理</p>
            `;
        }

        // 重置为示例数据卡片
        function resetDataCards() {
            const sampleDataCards = [
                {
                    id: 1,
                    name: '车辆安全监控KPI',
                    type: 'kpi',
                    metricId: 1,
                    dimensionId: null,
                    config: {
                        format: 'number',
                        comparison: 'previous_period'
                    },
                    description: '显示车辆安全监控的KPI指标卡',
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                },
                {
                    id: 2,
                    name: '网络安全事件趋势分析',
                    type: 'line',
                    metricId: 2,
                    dimensionId: 1,
                    config: {
                        title: '网络安全事件趋势分析',
                        xAxisLabel: '时间',
                        yAxisLabel: '事件数量',
                        colorScheme: 'blue'
                    },
                    description: '显示网络安全事件趋势的折线图',
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                },
                {
                    id: 3,
                    name: '车辆安全事件明细表（按时间分组）',
                    type: 'table',
                    metricId: null,
                    metricIds: [1, 2, 3],
                    dimensionId: 1,
                    config: {
                        metricIds: [1, 2, 3],
                        columns: 6,
                        pageSize: 10,
                        dimensionUsage: 'grouping'
                    },
                    description: '按时间维度分组显示车辆安全事件的详细统计信息',
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                },
                {
                    id: 4,
                    name: '安全事件明细数据表',
                    type: 'table',
                    metricId: null,
                    metricIds: [1, 4, 5],
                    dimensionId: null,
                    config: {
                        metricIds: [1, 4, 5],
                        columns: 5,
                        pageSize: 10,
                        dimensionUsage: 'none'
                    },
                    description: '直接展示安全事件的详细数据，不按维度分组',
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                }
            ];


            
            document.getElementById('result').innerHTML = `
                <div style="color: #52c41a; background: #f6ffed; padding: 10px; border-radius: 4px;">
                    ✅ 数据卡片已通过dataConfig.js统一管理！
                </div>
                <p>现在请<a href="datacards.html">返回数据卡片页面</a>查看效果。</p>
            `;
            
            checkCurrentStatus();
        }

        // 清空所有数据卡片
        function clearAllDataCards() {
            if (confirm('确定要清空所有数据卡片吗？此操作不可恢复！')) {
    
                document.getElementById('result').innerHTML = `
                    <div style="color: #f5222d; background: #fff2f0; padding: 10px; border-radius: 4px;">
                        ⚠️ 数据卡片已通过dataConfig.js统一管理，无法单独清空
                    </div>
                `;
                checkCurrentStatus();
            }
        }

        // 页面加载时检查状态
        checkCurrentStatus();
    </script>
</body>
</html>